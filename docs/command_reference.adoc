
=== Core node or Gateway setup using docker
Below are the list of commands that can be used with cli to setup a core node or gateway.

=== docker configure
[source, bash]
----
usage: radixnode docker configure [-h]

optional arguments:
  -h, --help  show this help message and exit
----

=== docker config
[source, bash]
----
usage: radixnode docker config [-h] [-t TRUSTEDNODE] [-d CONFIGDIR]
                               [-n NETWORKID] [-p POSTGRESPASSWORD]
                               [-k KEYSTOREPASSWORD] [-nk] [-xc {true,false}]
                               [-xg {true,false}]
                               [-m {CORE,GATEWAY,DETAILED} [{CORE,GATEWAY,DETAILED} ...]]

optional arguments:
  -h, --help            show this help message and exit
  -t TRUSTEDNODE, --trustednode TRUSTEDNODE
                        Trusted node on radix network. Example format:
                        radix//brn1q0mgwag0g9f0sv9fz396mw9rgdall@10.1.2.3
  -d CONFIGDIR, --configdir CONFIGDIR
                        Path to node-config directory where config file will
                        stored
  -n NETWORKID, --networkid NETWORKID
                        Network id of network you want to connect.For stokenet
                        it is 2 and for mainnet it is 1.If not provided you
                        will be prompted to enter a value
  -p POSTGRESPASSWORD, --postgrespassword POSTGRESPASSWORD
                        Password for the postgres user. This is used for
                        Gateway setup
  -k KEYSTOREPASSWORD, --keystorepassword KEYSTOREPASSWORD
                        Password for the keystore file
  -nk, --newkeystore    Set this to true to create a new store without any
                        prompts using location defined in argument configdir
  -xc {true,false}, --disablenginxforcore {true,false}
                        Set this to disable to nginx for core
  -xg {true,false}, --disablenginxforgateway {true,false}
                        Set this to disable to nginx for gateway
  -m {CORE,GATEWAY,DETAILED} [{CORE,GATEWAY,DETAILED} ...], --setupmode {CORE,GATEWAY,DETAILED} [{CORE,GATEWAY,DETAILED} ...]
                        Quick config mode with assumed defaults. It supports
                        two quick modes and a detailed config mode. CORE: Use
                        this value to setup CORE using defaults. GATEWAY: Use
                        this value to setup GATEWAY using defaults. DETAILED:
                        Default value if not provided. This mode takes your
                        through series of questions.
----

=== docker setup
[source, bash]
----
usage: radixnode docker setup [-h] [-f CONFIGFILE] [-a]

optional arguments:
  -h, --help            show this help message and exit
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file
  -a, --autoapprove     Set this to true to run without any prompts
----

=== docker start
[source, bash]
----
usage: radixnode docker start [-h] [-f CONFIGFILE]

optional arguments:
  -h, --help            show this help message and exit
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file
----

=== docker stop
[source, bash]
----
usage: radixnode docker stop [-h] [-f CONFIGFILE] [-v]

optional arguments:
  -h, --help            show this help message and exit
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file
  -v, --removevolumes   Remove the volumes
----
=== Radix node CLI command reference
This document is to list all the commands and features that radixnode CLI supports.

=== systemd configure
[source, bash]
----
usage: radixnode systemd configure [-h]

optional arguments:
  -h, --help  show this help message and exit
----

=== systemd setup
[source, bash]
----
usage: radixnode systemd setup [-h] [-r RELEASE] [-x NGINXRELEASE] -t
                               TRUSTEDNODE -n {fullnode,archivenode} -i HOSTIP
                               [-ts] [-u]

This sets up the systemd service for the core node.

optional arguments:
  -h, --help            show this help message and exit
  -r RELEASE, --release RELEASE
                        Version of node software to install
  -x NGINXRELEASE, --nginxrelease NGINXRELEASE
                        Version of radixdlt nginx release
  -t TRUSTEDNODE, --trustednode TRUSTEDNODE
                        Trusted node on radix network
  -n {fullnode,archivenode}, --nodetype {fullnode,archivenode}
                        Type of node fullnode or archivenode
  -i HOSTIP, --hostip HOSTIP
                        Static Public IP of the node
  -ts, --enabletransactions
                        Enable transaction stream api
  -u, --update          Update the node to new version of node
----

=== systemd restart
[source, bash]
----
usage: radixnode systemd restart [-h] [-s {all,nginx,radixdlt-node}]

optional arguments:
  -h, --help            show this help message and exit
  -s {all,nginx,radixdlt-node}, --services {all,nginx,radixdlt-node}
                        Name of the service either to be started. Valid values
                        nginx or radixdlt-node
----

=== systemd stop
[source, bash]
----
usage: radixnode systemd stop [-h] [-s {all,nginx,radixdlt-node}]

optional arguments:
  -h, --help            show this help message and exit
  -s {all,nginx,radixdlt-node}, --services {all,nginx,radixdlt-node}
                        Name of the service either to be stopped. Valid values
                        nginx or radixdlt-node
----
=== Set passwords for the Nginx server
This will set up the admin user and password for access to the general system endpoints.

=== auth set-admin-password
[source, bash]
----
usage: radixnode auth set-admin-password [-h] -m {DOCKER,SYSTEMD}
                                         [-u USERNAME] [-p PASSWORD]

This sets up admin password on nginx basic auth. Refer this link for all the
path. https://docs.radixdlt.com/main/node-and-gateway/port-
reference.html#_endpoint_usage

optional arguments:
  -h, --help            show this help message and exit
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD
  -u USERNAME, --username USERNAME
                        Name of admin user
  -p PASSWORD, --password PASSWORD
                        Password of admin user
----

=== auth set-superadmin-password
[source, bash]
----
usage: radixnode auth set-superadmin-password [-h] -m {DOCKER,SYSTEMD}
                                              [-u USERNAME] [-p PASSWORD]

optional arguments:
  -h, --help            show this help message and exit
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD
  -u USERNAME, --username USERNAME
                        Name of superadmin user
  -p PASSWORD, --password PASSWORD
                        Password of superadmin user
----

=== auth set-metrics-password
[source, bash]
----
usage: radixnode auth set-metrics-password [-h] -m {DOCKER,SYSTEMD}
                                           [-u USERNAME] [-p PASSWORD]

optional arguments:
  -h, --help            show this help message and exit
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD
  -u USERNAME, --username USERNAME
                        Name of metrics user
  -p PASSWORD, --password PASSWORD
                        Password of metrics user
----
=== Accessing core endpoints using CLI
Once the nginx basic auth passwords for admin, superadmin, metrics users are setup , radixnode cli can be used to access the node endpoints
=== core entity
[source, bash]
----
usage: radixnode api core entity [-h] [-v] [-a] [-p] [-sy] [-ss] [-su] [-se]

optional arguments:
  -h, --help            show this help message and exit
  -v, --validator       Display entity details of validator address
  -a, --address         Display entity details of validator account address
  -p, --p2p             Display entity details of validator peer to peer
                        address
  -sy, --subEntitySystem
                        Display entity details of validator address along with
                        sub entity system
  -ss, --subPreparedStake
                        Display entity details of validator account address
                        along with sub entity prepared_stake
  -su, --subPreparedUnStake
                        Display entity details of validator account address
                        along with sub entity prepared_unstake
  -se, --subExitingStake
                        Display entity details of validator account address
                        along with sub entity exiting_stake
----
=== core key-list
[source, bash]
----
usage: radixnode api core key-list [-h]

optional arguments:
  -h, --help  show this help message and exit
----
=== core mempool
[source, bash]
----
usage: radixnode api core mempool [-h]

optional arguments:
  -h, --help  show this help message and exit
----
=== core mempool-transaction
[source, bash]
----
usage: radixnode api core mempool-transaction [-h] -t TRANSACTIONID

optional arguments:
  -h, --help            show this help message and exit
  -t TRANSACTIONID, --transactionId TRANSACTIONID
                        transaction Id to be searched on mempool
----
=== core update-validator-config
[source, bash]
----
usage: radixnode api core update-validator-config [-h]

Utility command that helps a node runner to * register * unregister * set
validator metadata such as name/url * Add or change validator fee * Setup
delegation or change owner id

optional arguments:
  -h, --help  show this help message and exit
----
=== system metrics
[source, bash]
----
usage: radixnode api system metrics [-h]

optional arguments:
  -h, --help  show this help message and exit
----
=== system health
[source, bash]
----
usage: radixnode api system health [-h]

optional arguments:
  -h, --help  show this help message and exit
----
=== system version
[source, bash]
----
usage: radixnode api system version [-h]

optional arguments:
  -h, --help  show this help message and exit
----
=== Setup monitoring using CLI
Using CLI , one can setup monitoring of the node or gateway.

=== monitoring config
[source, bash]
----
usage: radixnode monitoring config [-h]
                                   [-m {MONITOR_CORE,MONITOR_GATEWAY,DETAILED} [{MONITOR_CORE,MONITOR_GATEWAY,DETAILED} ...]]
                                   [-cm COREMETRICSPASSWORD]
                                   [-gm GATEWAYAPIMETRICSPASSWORD]
                                   [-am AGGREGATORMETRICSPASSWORD]
                                   [-d MONITORINGCONFIGDIR]

optional arguments:
  -h, --help            show this help message and exit
  -m {MONITOR_CORE,MONITOR_GATEWAY,DETAILED} [{MONITOR_CORE,MONITOR_GATEWAY,DETAILED} ...], --setupmode {MONITOR_CORE,MONITOR_GATEWAY,DETAILED} [{MONITOR_CORE,MONITOR_GATEWAY,DETAILED} ...]
                        Quick setup with assumed defaults. It supports three
                        quick setup mode and a detailed setup mode.
                        MONITOR_CORE: Use this value to monitor Core using
                        defaults which assume core is run on same machine as
                        monitoring. MONITOR_GATEWAY: Use this value to monitor
                        GATEWAY using defaults which assume network gateway is
                        run on same machine. DETAILED: Default value if not
                        provided. This mode takes your through series of
                        questions.
  -cm COREMETRICSPASSWORD, --coremetricspassword COREMETRICSPASSWORD
                        Password for core metrics basic auth user
  -gm GATEWAYAPIMETRICSPASSWORD, --gatewayapimetricspassword GATEWAYAPIMETRICSPASSWORD
                        Password for gateway api metrics basic auth user
  -am AGGREGATORMETRICSPASSWORD, --aggregatormetricspassword AGGREGATORMETRICSPASSWORD
                        Password for aggregator metrics basic auth user
  -d MONITORINGCONFIGDIR, --monitoringconfigdir MONITORINGCONFIGDIR
                        Path to monitoring directory where config file will
                        stored
----

=== monitoring setup
[source, bash]
----
usage: radixnode monitoring setup [-h] [-f MONITORINGCONFIGFILE] [-a]

optional arguments:
  -h, --help            show this help message and exit
  -f MONITORINGCONFIGFILE, --monitoringconfigfile MONITORINGCONFIGFILE
                        Path to config file. Default is
                        '/Users/shambu/monitoring/monitoring_config.yaml'
  -a, --autoapprove     Set this to true to run without any prompts
----

=== monitoring start
[source, bash]
----
usage: radixnode monitoring start [-h] [-f MONITORINGCONFIGFILE] [-a]

optional arguments:
  -h, --help            show this help message and exit
  -f MONITORINGCONFIGFILE, --monitoringconfigfile MONITORINGCONFIGFILE
                        Path to config file. Default is
                        '/Users/shambu/monitoring/monitoring_config.yaml'
  -a, --autoapprove     Set this to true to run without any prompts
----

=== monitoring stop
[source, bash]
----
usage: radixnode monitoring stop [-h] [-f MONITORINGCONFIGFILE] [-v]

optional arguments:
  -h, --help            show this help message and exit
  -f MONITORINGCONFIGFILE, --monitoringconfigfile MONITORINGCONFIGFILE
                        Path to config file. Default is
                        '/Users/shambu/monitoring/monitoring_config.yaml'
  -v, --removevolumes   Remove the volumes
----
=== Other commands supported by CLI
List of other commands supported by cli are to check the version of CLI being used and optimise-node
to setup some of the OS tweaks on ubuntu

=== version 
[source, bash]
----
usage: radixnode.py version [-h]

optional arguments:
  -h, --help  show this help message and exit
----

=== optimise-node 
[source, bash]
----
usage: radixnode.py optimise-node [-h]

Run this command to setup ulimits and swap size on the fresh ubuntu machine .
Prompts asking to setup limits . Prompts asking to setup swap and size of swap
in GB

optional arguments:
  -h, --help  show this help message and exit
----
